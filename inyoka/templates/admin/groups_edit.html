{#
    admin/groups.html
    ~~~~~~~~~~~~~~~~~


    Edit/Create a new group.

    :copyright: 2008 by Christopher Grebs.
    :license: GNU GPL.
#}
{%- extends 'admin/overall.html' %}
{% from 'macros.html' import render_form %}

{% if is_new %}
  {% set navigation_trace = [
    (href('admin', 'groups', 'new'), 'neue Gruppe'),
  ] %}
{% else %}
  {% set navigation_trace = [
    (href('admin', 'groups', 'edit', group_name), 'Gruppe „%s“ editieren'|format(group_name)),
  ] %}
{% endif %}

{% set navigation_trace = [
    (href('admin', 'groups'), 'Gruppen')
] %}

{% set scripts = ['PrivilegeBox.js'] %}

{% block appheader %}
<h1><a href="{{ href('admin') }}">Administration</a></h1>
<h2><a href="{{ href('admin', 'groups') }}">Gruppen</a></h2>
{% endblock %}

{% block admin_content %}
<h3>Gruppenkonfiguration</h3>
<form action="" method="post">
  <dl>
    {{ render_form(form, ['name', 'permissions'], inline=true) }}
    <dt>Forum-Privilegien:</dt>
    <dd id="forum_rights">Javascript muss aktiviert sein, um die Privilegien zu editieren!</dd>
  </dl>
  <input type="submit" value="Speichern" />
  <p><strong>Hinweis:</strong> Um in einem Forum sämtliche Rechte wegzunehmen, muss explizit <em>darf nix</em> ausgewählt sein.</p>
</form>

<script type="text/javascript">
  var forum_rights = new PrivilegeBox('#forum_rights', {{ group_forum_privileges|jsonencode }},
    {{ forum_privileges|jsonencode }});
</script>
{% endblock %}
