{#
    admin/articles.html
    ~~~~~~~~~~~~~~~~~~~

    This is the overview of ikhaya articles.

    :copyright: 2008 by Benjamin Wiegand.
    :license: GNU GPL.
#}
{% extends 'admin/overall.html' %}
{% set navigation_trace = [
    (href('admin', 'ikhaya'), 'Ikhaya'),
    (href('admin', 'articles'), 'Artikel'),
  ] %}
{% block appheader %}
<h1>Administration</h1>
<h2>Ikhaya</h2>
{% endblock %}

{% block admin_content %}
<h3>{{ title_trace[0] }}</h3>
<table class="ikhaya_articles">
  <thead>
  <tr>
    <th>{{ table.get_html('subject', 'Titel') }}</th>
    <th>{{ table.get_html('portal_user.username', 'Autor', related=true) }}</th>
    <th>{{ table.get_html('ikhaya_category.name', 'Kategorie', related=true) }}</th>
    <th>{{ table.get_html('pub_date', 'Veröffentlichung') }}</th>
  </tr>
  </thead>
  <tbody>
  {%- for article in articles %}
  <tr{% if not article.public %} class="not_published"{% endif %}>
    <td><a href="{{ article|url('edit') }}">{{ article.subject|e }}</a></td>
    <td><a href="{{ article.author|url }}">{{ article.author.username|e }}</a></td>
    <td><a href="{{ article.category|url }}">{{ article.category.name|e }}</a></td>
    <td>{{ article.pub_date.strftime('%d.%m.%Y %H:%I') }}</td>
  </tr>
  {%- else %}
  <tr>
    <td colspan="3">Es existieren keine Artikel, <a href="{{ href('admin', 'ikhaya', 'articles', 'new') }}">erstelle</a> jetzt den ersten Artikel!</td>
  </tr>
  {%- endfor %}
  </tbody>
</table> 
{{ pagination.generate() }}
<p>
  <em>Grau markierte Artikel sind nicht veröffentlicht!</em>
</p>
<a href="{{ href('admin', 'ikhaya', 'articles', 'new') }}">Neuen Artikel erstellen</a>
{% endblock %}
