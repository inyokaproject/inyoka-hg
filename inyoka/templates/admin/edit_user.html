{#
    admin/edit_user.html
    ~~~~~~~~~~~~~~~~~~~~

    Just edit an user...

    :copyright: 2008 by Christopher Grebs.
    :license: GNU GPL.
#}
{% extends 'admin/overall.html' %}
{% set styles = ['editor.css', 'datetimefield.css'] %}
{% set scripts = ['WikiEditor.js', 'DateTime.js', 'Permissions.js'] %}

{% set navigation_trace = [
    (href('admin', 'users'), 'Benutzer'),
] %}

{% block appheader %}
<h1>Administration</h1>
<h2>Benutzer</h2>
{% endblock %}


{% block admin_content %}
<form action="" method="post">
  <h2>Einstellungen von {{ user.username }}</h2>
  <h3>Forum-Einstellungen</h3>
  <p>
    {% if user_groups %}
    Der Bentuzer {{ user.username }} gehört den folgenden Gruppen an: {{ user_groups|join(', ') }}
    {% else %}
    Der Bentuzer {{ user.username }} gehört keinen Gruppen an.
    {% endif %}
  </p>
  <dl>
  {{ h.render_form(form, 'username', 'is_active', 'forum_privileges', inline=true) }}
  {{ h.render_form(form, 'date_joined', inline=true) }}
  </dl>
  <h3>Persönliche Details von {{ user.username }}</h3>
  {{ h.render_form(form, 'new_password', 'website', 'interests', 'location') }}
  <h3>Benachrichtigungs-Einstellungen</h3>
  {{ h.render_form(form, 'jabber', 'icq', 'msn', 'aim', 'yim') }}
  <h3>Sonstige Einstellungen</h3>
  {{ h.render_form(form, 'signature', 'coordinates', 'avatar', 'gpgkey') }}
  <h3>Rechte</h3>
  <dl>
    <dt>Forum:</dt>
    <dd id="forum_rights">Javascript muss aktiviert sein!</dd>
  </dl>
  <p>
    <button type="submit" id="submit">Speichern</button>
    <button type="reset" id="reset">Zurücksetzen</button>
  </p>
</form>
<script type="text/javascript">
  /* <![CDATA[ */
  var signature = new WikiEditor('textarea[@name="signature"]');
  var date = new DateTimeField('input[@name="date_joined"]');
  var rights = new PermissionBox('#forum_rights', [
  //  [  slug       name      permissions ]
      ['forum_1', 'Forum 1', ['read', 'reply', 'sticky', 'create']],
      ['bla', 'Bla', ['reply', 'edit']],
      ['foo', 'foo', ['read', 'moderate', 'edit']],
      ['bar', 'bar', ['write']]
    ], {{ permissions|jsonencode }});
  /* ]]> */
</script>
{% endblock %}
