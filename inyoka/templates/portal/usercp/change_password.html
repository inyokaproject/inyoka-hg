{#
    portal/usercp/change_password.html
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

    This page dispalys a formular where the user can change his password.

    :copyright: 2007 by Christopher Grebs, Benjamin Wiegand.
    :license: GNU GPL.
#}

{% extends 'portal/usercp/overall.html' %}
{% set title_trace = ['Passwort ändern'] %}
{% set selected = 'password' %}

{% block appheader %}
  <h1>Verwaltung</h1>
  <h2>Passwort ändern</h2>
{% endblock %}
{% block portal_content %}
  <h3>Passwort ändern</h3>
  <form action="" method="post">
    <p>
      Hier kannst du das Passwort für deinen Account ändern.<br />
      Zur Sicherheit musst du dafür nocheinmal dein altes Passwort angeben.
    </p>
    {{ h.render_form(form, 'old_password', 'new_password') }}
    <p class="rand">
      <a href="{{ href('portal', 'usercp', 'password', random=true) }}">
        Zufälliges Passwort generieren
      </a>
    </p>
    <p>
      <input type="submit" value="Passwort ändern" />
    </p>
    <script type="text/javascript">
      (function () {
        $('p.rand a')
          .click(function() {
            $.getJSON('/?__service__=portal.get_random_password', function(data) {
              $('dd input#id_new_password')
                .attr('value', data.password);
            })
            return false;
          });
      })();
    </script>
  </form>

  {{ h.render_change_password_form(form) }}
{% endblock %}
