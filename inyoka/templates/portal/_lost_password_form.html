{#
    portal/_lost_password_form
    ~~~~~~~~~~~~~~~~~~~~~~~~~~

    This macro renders the lost password formular.

    :copyright: 2007 by Christopher Grebs.
    :license: GNU GPL.
#}
<form action="" method="post">
  <dl>
    <dt>Benutzername:</dt>
    <dd>{{ form.username }}{{ h.field_errors(form.errors.username) }}</dd>
    <dt>E-Mail:</dt>
    <dd>{{ form.email }}{{ h.field_errors(form.errors.email) }}</dd>
    <dd class="hide"><input type="submit" /></dd><!-- at enter the first submit button is used -->
    <dt>CAPTCHA</dt>
    <dd class="captcha"><img src="/?__service__=portal.get_captcha" alt="" /></dd>
    <dd>Bitte gib den Code von obigem Bild hier ein:</dd>
    <dd>{{ form.captcha }}
        <input type="submit" name="renew_captcha" value="Neues CAPTCHA erzeugen" />
        {{ h.field_errors(form.errors.captcha) }}</dd>
    <dd>
      <input type="submit" value="Registrieren" />
    </dd>
  </dl>
  <script type="text/javascript">
    /*<![CDATA[*/
    (function() {
      var captcha_url = $('dd.captcha img').attr('src');
      $('input[@name="renew_captcha"]')
        .click(function() {
          var uid = Math.random().toString().substring(2, 10);
          $('dd.captcha img')
            .attr('src', captcha_url + '&rnd=' + uid);
          return false;
        });
    })();
    /*]]>*/
  </script>
</form>
