{#
    portal/search_results.html
    ~~~~~~~~~~~~~~~~~~~~~~~~~~

    This page displays the search results.

    :copyright: 2007 by Christoph Hack.
    :license: GNU GPL.
#}

{%- extends 'portal/overall.html' %}
{% set navi_type = 'tabbar' %}
{% set title = 'Suche' %}
{% set active_app = area %}

{% block appheader %}
  <h1><a href="{{ href('portal', 'search') }}">Suche</a></h1>
  <h2>Ergebnisse für „{{ query|e }}“</h2>
{% endblock %}

{% block portal_content %}
  <h3>Suche</h3>
  <form action="{{ href('portal', 'search') }}" method="GET" class="search_result">
    <p>{{ searchform.query }}</p>
    <input type="submit" value="Suchen" />
    {{ searchform.area }}
    <br style="clear: both;" />
  </form>
  <hr class="divider" />
  {% if results.results %}{{ pagination }}{% endif %}
  <ul class="search_results">
    {%- for doc in results.results %}
    <li>
      <h2>
        <img src="{{ href('static', 'img/icons/small/%s.png' % doc.component|lower) }}"
          alt="{{ doc.component }}" title="{{ doc.component }}" />
        <a href="{{ doc.url }}{% if doc.highlight and highlight %}?highlight={{ highlight|urlencode|e }}{% endif %}">
          {{ doc.title }}
        </a>
      </h2>
      <p class="description">
        {{ doc.excerpt }}
      </p>
      <p class="meta">
        {%- if doc.component in ('Forum', 'Ikhaya') %}
        geschrieben von <a href="{{ doc.user_url }}">{{ doc.user.username|e }}</a> am {{ doc.date.strftime('%d.%m.%Y um %H:%M') }} in <a href="{{ doc.group_url }}">{{ doc.group|e }}</a>
        {%- elif doc.component == 'Wiki' %}
        zuletzt bearbeitet von <a href="{{ doc.user_url }}">{{ doc.user.username|e }}</a> am {{ doc.date.strftime('%d.%m.%Y um %H:%M') }}
        {%- endif %}
      </p>
    </li>
    {%- else %}
    <li class="no_results">Es wurden keine passenden Ergebnisse gefunden.</li>
    {%- endfor %}
  </ul>
  <br />
  {% if results.results %}{{ pagination }}{% endif %}
  <br clear="both" />
{% endblock %}
