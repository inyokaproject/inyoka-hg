{#
    forum/newposts.html
    ~~~~~~~~~~~~~~~~~~~

    Show a list of all recent posts.

    :copyright: 2007 by Christoph Hack.
    :license: GNU GPL.
#}
{% extends 'forum/page.html' %}

{% set title_trace = ['Neue Beiträge'] %}
{% set name = 'Neue Beiträge' %}

{% block forum_content %}
  <table class="forum">
    <thead>
      <tr><th colspan="5" class="category">Neue Beiträge</th></tr>
    </thead>
    <tbody>
      <tr>
        <th class="topic" colspan="2">Thema</th>
        <th class="post_count">Antworten</th>
        <th class="view_count">Aufrufe</th>
        <th class="last_post">Letzte Antwort</th>
      </tr>
    {%- for post in posts %}
      <tr{% if post.topic.hidden or post.topic.reported %} class="{% if post.topic.hidden %}hidden {% endif %}{% if post.topic.reported %}reported{% endif %}"{% endif %}>
        <td class="icon">
          {% if post.topic.get_read_status(USER) %}
            {{ topic_icon(post.topic) }}
          {% else %}
            new
          {% endif %}
        </td>
        <td class="topic">
          {%- if post.topic.sticky %}<strong>Wichtig: </strong>{% endif -%}
          <a href="{{ post.topic|url }}" class="topic_title"> 
            {{- post.topic.title|e -}}
          </a>
          {%- if post.topic.has_poll %} <strong>[Umfrage]</strong> {% endif -%}
          {%- if post.topic.hidden %} [Verborgen] {% endif %}
          {%- if post.topic.reported %} [Gemeldet] {% endif %}
          {%- if post.topic.paginated %} {{post.topic.get_pagination() }} {% endif -%}
          <p class="description">
            von <a href="{{ post.topic.author|url }}">{{ post.topic.author.username|e }}</a>
          </p>
        </td>
        <td class="post_count">{{ post.topic.post_count }}</td>
        <td class="view_count">{{ post.topic.view_count }}</td>
        <td class="last_post">
          <a href="{{ post|url}}" class="date">{{
              post.pub_date|datetimeformat }}</a><br />
          <a href="{{ post.author|url}}">{{ post.author }}</a>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="5">
          Es wurden keine entsprechenden Beiträge gefunden.
      </tr>
    {% endfor %}
    </tbody>
  </table>
  <div class="pagination">
    Gehe zu Seite {{ pagination }}
  </div>
{% endblock %}

{% macro topic_icon topic -%}<img src="
{{- href('static', 'img', 'forum', 'topic' ) -}}
{%- if topic.hidden %}-hidden{% endif -%}
{%- if topic.reported %}-reported{% endif -%}
{%- if topic.solved %}-solved{% endif -%}
{#- TODO: watched -#}
.png" alt="
{%- if topic.hidden %}verstecktes {% endif -%}
{%- if topic.reported %}gemeldetes {% endif -%}
{%- if topic.solved %}gelöstes {% endif -%}
{#- TODO: watched -#}
Thema" />
{%- endmacro %}
